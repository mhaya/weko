{#
# This file is part of WEKO3.
# Copyright (C) 2017 National Institute of Informatics.
#
# WEKO3 is free software; you can redistribute it
# and/or modify it under the terms of the GNU General Public License as
# published by the Free Software Foundation; either version 2 of the
# License, or (at your option) any later version.
#
# WEKO3 is distributed in the hope that it will be
# useful, but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
# General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with WEKO3; if not, write to the
# Free Software Foundation, Inc., 59 Temple Place, Suite 330, Boston,
# MA 02111-1307, USA.
#}

<div id="invenio-search">
  <div id="item_management"class="hide">item_management</div>
  <div role="navigation">
    <ul class="nav nav-tabs">
      {%- block item_management_tabs %}
        {% from "weko_theme/macros/item_management_tabs_selector.html" import tabs_selector %}
        {{ tabs_selector('bulk_update') }}
      {%- endblock item_management_tabs%}

      <!--<li id="tab_display" role="presentation" class="active activity_li">-->
        <!--<a class="active activity_li" data-show-tab="display">{{_('Custom Sort')}}</a></li>-->
    </ul>
  </div>
  <br>
  <div class="row">
    <div class="panel panel-default">
      <div class="panel-heading clearfix">
        <span class="panel-title">
          {{_('Setting Items')}}
        </span>
      </div>
      <div class="panel-body">
        <div class="row field-row">
          <div class="col-md-2">
            <select class="form-control" name="field-select">
              <option value="0" selected></option>
              {%- for field in fields if fields %}
              <option value="{{field.id}}">{{field.name}}</option>
              {%- endfor %}
            </select>
          </div>
          <div class="col-md-9">
            <div class="row field-content" hidden>
              <textarea class="form-control" rows="3" name="licence-description"></textarea>
            </div>
            <div class="row field-content" hidden>
              <textarea class="form-control" rows="3" name="licence-description"></textarea>
            </div>

          </div>
          <div class="col-md-1">
          </div>
        </div>

        <div id="add-link-row" class="row">
          <div class="col-md-2">
            <a id="add-field-link" href="#">{{_('Add Update Field')}}</a>
          </div>
        </div>

      </div>
    </div>
  </div>
  <div class="row">
  <invenio-search
   {%- if index_id %}
     search-endpoint="{{ config.WEKO_SEARCH_UI_SEARCH_INDEX_API }}"
   {%- else %}
     search-endpoint="{{ config.SEARCH_UI_SEARCH_API }}"
   {%- endif %}
   search-extra-params='{"size":100}'
   search-hidden-params='{% if search_hidden_params %}{{search_hidden_params|tojson}}{% endif %}'
   search-headers='{"Accept": "{{ config.SEARCH_UI_SEARCH_MIMETYPE|default('application/json')}}"}'
  >
  <div id="search_res" ng-controller="searchResCtrl">
  <div class="panel panel-default">
    <div class="panel-heading clearfix">
      <span class="panel-title">
        {{_('Bulk Update')}}
      </span>
    </div>
    <div class="panel-body">
      <div id="index_item_list">
        {%- if not page_id %}
        {%- if index_id %}
          <invenio-search-results
           template="{{ url_for('static', filename=config.WEKO_ITEM_MANAGEMENT_JSTEMPLATE_BREAD) }}">
          </invenio-search-results>
        {%- endif %}
        <br>
        <div class="panel-group m-top-5">
          <div class="panel panel-default">
            <div class="panel-body">
              <div class="row">
                {%- block search_item_result %}
                  <div class="col-xs-12 col-md-12">
                    {%- block search_error %}
                    <invenio-search-error
                     template="{{ url_for('static', filename=config.SEARCH_UI_JSTEMPLATE_ERROR) }}"
                     message="{{ _('Search failed.') }}">
                    </invenio-search-error>
                    {%- endblock search_error %}
                    {%- block search_loading %}
                    <invenio-search-loading
                     template="{{ url_for('static', filename=config.SEARCH_UI_JSTEMPLATE_LOADING) }}"
                     message="{{ _('Loading...') }}">
                    </invenio-search-loading>
                    {%- endblock search_loading %}
                    {%- block search_results %}
                    <invenio-search-results
                     template="{{ url_for('static', filename=config.WEKO_ITEM_MANAGEMENT_JSTEMPLATE_RESULTS_EDIT) }}">
                    </invenio-search-results>
                    {%- endblock search_results %}
                  </div>
                {%- endblock search_item_result %}
              </div>
            </div>
          </div>
        </div>
        {%- endif %}
      </div>
      <div class="text-center">
        {%- block search_pagination_top %}
        <invenio-search-pagination
         template="{{ url_for('static', filename=config.SEARCH_UI_ITEM_MANAGEMENT_JSTEMPLATE_PAGINATION) }}">
        </invenio-search-pagination>
        {%- endblock search_pagination_top %}
      </div>
      <div class="row">
        <div class="col-sm-9 col-md-9">
          <a ng-hide="!display_flg" class="btn btn-primary btn-sm" ng-click="itemManagementEdit()">
            {{ _("Edit") }}</a>
        </div>
        <div class="col-sm-3 col-md-3">
          <a ng-hide="display_flg" class="btn btn-primary btn-sm" ng-click="itemManagementSave()">
            {{ _('Save') }}</a>
          <a ng-hide="display_flg" class="btn btn-primary btn-sm" ng-click="itemManagementCancel()">
            {{ _('Cancel') }}</a>
        </div>
      </div>
    </div>
  </div>
  </div >
  </invenio-search>
  </div>
</div>
